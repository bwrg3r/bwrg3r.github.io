import{j as o,c}from"./index.Cm2v_UWq.js";import{r as l}from"./index.BCtMShv3.js";import{c as w,P as f,u as C,a as g}from"./index.CBjpc3V2.js";import"./index.DaKJxkVF.js";var v="Avatar",[I,T]=w(v),[h,A]=I(v),p=l.forwardRef((a,e)=>{const{__scopeAvatar:s,...t}=a,[n,r]=l.useState("idle");return o.jsx(h,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:r,children:o.jsx(f.span,{...t,ref:e})})});p.displayName=v;var x="AvatarImage",S=l.forwardRef((a,e)=>{const{__scopeAvatar:s,src:t,onLoadingStatusChange:n=()=>{},...r}=a,u=A(x,s),i=N(t,r.referrerPolicy),d=C(m=>{n(m),u.onImageLoadingStatusChange(m)});return g(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?o.jsx(f.img,{...r,ref:e,src:t}):null});S.displayName=x;var j="AvatarFallback",L=l.forwardRef((a,e)=>{const{__scopeAvatar:s,delayMs:t,...n}=a,r=A(j,s),[u,i]=l.useState(t===void 0);return l.useEffect(()=>{if(t!==void 0){const d=window.setTimeout(()=>i(!0),t);return()=>window.clearTimeout(d)}},[t]),u&&r.imageLoadingStatus!=="loaded"?o.jsx(f.span,{...n,ref:e}):null});L.displayName=j;function N(a,e){const[s,t]=l.useState("idle");return g(()=>{if(!a){t("error");return}let n=!0;const r=new window.Image,u=i=>()=>{n&&t(i)};return t("loading"),r.onload=u("loaded"),r.onerror=u("error"),r.src=a,e&&(r.referrerPolicy=e),()=>{n=!1}},[a,e]),s}var R=p,_=S,b=L;function k({className:a,...e}){return o.jsx(R,{"data-slot":"avatar",className:c("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...e})}function E({className:a,...e}){return o.jsx(_,{"data-slot":"avatar-image",className:c("aspect-square size-full",a),...e})}function y({className:a,...e}){return o.jsx(b,{"data-slot":"avatar-fallback",className:c("bg-muted flex size-full items-center justify-center rounded-full",a),...e})}const $=({src:a,alt:e,fallback:s,className:t})=>o.jsxs(k,{className:t,children:[o.jsx(E,{src:a,alt:e}),o.jsx(y,{children:s})]});export{$ as default};
